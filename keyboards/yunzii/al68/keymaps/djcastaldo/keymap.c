/* 5/31/2025 custom keymap.c by @davex 
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
#include QMK_KEYBOARD_H
// #include "common/smart_ble.h"
#include "layers.h"
#include "process_record_userspace.h"

__attribute__ ((weak))
bool process_record_secrets(uint16_t keycode, keyrecord_t *record) {
  return true;
}
__attribute__ ((weak))
bool process_leader_secrets(void) {
  return true;
}

// custom keycodes
enum my_keycodes {
    CUSTOM_KEYCODE = USERSPACE_END,
};

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
//  [WIN_BASE]
//  ____________________________________________________________________________________________________________________________________
// :   _______________________________________________________________________________________________________________________ .----.   :
// :  |D-ESC || 1    || 2    || 3    || 4    || 5    || 6    || 7    || 8    || 9    || 0    || -    || =    || Backspace    |: Vol  :  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________|'.____.'  :
// :  | LT(TMUX) || Q    || W    || E    || R    || T    || Y    || U    || I    || O    || P    || [    || ]    || \        || Del  |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  | CAPS / Fn   || A    || S    || D    || F    || G    || H    || J    || K    || L    || ;    || '    || Enter         || PgUp |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  | Shift           || Z    || X    || C    || V    || B    || N    || M    || ,    || .    || /    ||TD(SFT_OSL)|| Up   || End  |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  | Ctrl    ||TD(GUI) || Alt     ||                   Space                      ||TD(FN_O) ||TD(CTL_O)|  | Left || Down || Rght |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [WIN_BASE] = LAYOUT_65_ansi_blocker(
        DUAL_ESC, KC_1,  KC_2,   KC_3,  KC_4,   KC_5,   KC_6,   KC_7,   KC_8,   KC_9,   KC_0, KC_MINS,  KC_EQL,  BSPCFAST, ENC_MUTEPLAY,
        LT(TMUX_LAYR,KC_TAB), KC_Q, KC_W, KC_E, KC_R, KC_T,  KC_Y,  KC_U,   KC_I,   KC_O,   KC_P,  KC_LBRC, KC_RBRC, KC_BSLS, KC_DELETE,
        TD(CAPS_LAYR), KC_A,   KC_S,  KC_D,    KC_F,   KC_G,   KC_H,  KC_J,   KC_K,    KC_L,  KC_SCLN, KC_QUOT,  KC_ENT,     KC_PAGE_UP,
        KC_LSFT,       KC_Z,  KC_X,  KC_C,   KC_V,   KC_B,   KC_N,   KC_M,  KC_COMM, KC_DOT, KC_SLSH, TD(RSFT_OSL), KC_UP, KC_PAGE_DOWN,
        KC_LCTL, TD(LGUI_OSL), KC_LALT,                  KC_SPC,                   TD(FN_OSL), TD(RCTL_OSL), KC_LEFT, KC_DOWN, KC_RIGHT
    ),
//  [MAC_BASE]
//  ____________________________________________________________________________________________________________________________________
// :   _______________________________________________________________________________________________________________________ .----.   :
// :  |D-ESC || 1    || 2    || 3    || 4    || 5    || 6    || 7    || 8    || 9    || 0    || -    || =    || Backspace    |: Vol  :  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________|'.____.'  :
// :  | LT(TMUX) || Q    || W    || E    || R    || T    || Y    || U    || I    || O    || P    || [    || ]    || \        || Del  |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  | TD(CAPS)    || A    || S    || D    || F    || G    || H    || J    || K    || L    || ;    || '    || Enter         || PgUp |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  | Shift           || Z    || X    || C    || V    || B    || N    || M    || ,    || .    || /    ||TD(RSFT)   || Up   || End  |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  | Ctrl    ||TD(LOPT)|| Command ||                   Space                      ||TD(FN)   ||TD(RCTL) |  | Left || Down || Rght |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [MAC_BASE] = LAYOUT_65_ansi_blocker(
        DUAL_ESC, KC_1,  KC_2,   KC_3,  KC_4,   KC_5,   KC_6,   KC_7,   KC_8,   KC_9,   KC_0, KC_MINS,  KC_EQL,  BSPCFAST, ENC_MUTEPLAY,
        LT(TMUX_LAYR,KC_TAB), KC_Q, KC_W, KC_E, KC_R, KC_T,  KC_Y,  KC_U,   KC_I,   KC_O,   KC_P,  KC_LBRC, KC_RBRC, KC_BSLS, KC_DELETE,
        TD(CAPS_LAYR), KC_A,   KC_S,  KC_D,    KC_F,   KC_G,   KC_H,  KC_J,   KC_K,    KC_L,  KC_SCLN, KC_QUOT,  KC_ENT,     KC_PAGE_UP,
        KC_LSFT,       KC_Z,  KC_X,  KC_C,   KC_V,   KC_B,   KC_N,   KC_M,  KC_COMM, KC_DOT, KC_SLSH, TD(RSFT_OSL), KC_UP, KC_PAGE_DOWN,
        KC_LCTL, TD(LOPT_OSL), KC_LCMD,                  KC_SPC,                   TD(FN_OSL), TD(RCTL_OSL), KC_LEFT, KC_DOWN, KC_RIGHT
    ),
//  [FN_LAYR]
//  ____________________________________________________________________________________________________________________________________
// :   _______________________________________________________________________________________________________________________ .----.   :
// :  |  `   || F1   || F2   || F3   || F4   || F5   || F6   || F7   || F8   || F9   || F10  || F11  || F12  ||              |: Zoom :  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________|'.____.'  :
// :  |MO(TMUX_L)||WMail2||WMail1||Mail  ||RPhone||WPhone||      ||      ||      ||      ||      ||MRec1 ||MRec2 ||          || Ins  |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||Addr  ||City  ||ZIP   ||Phone ||      ||      ||      ||      || Lead ||SLock || PScr ||               || Home |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  | MO(SFT_LAYR)    ||      ||Rout  ||Acct  ||      ||      ||      ||      ||MPly1 ||MPly2 ||Pause || MO(SFT_L) ||      || End  |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |         ||        ||MO(CTL_L)||                                              ||         ||MO(CTL_L)|  |      ||      ||      |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [FN_LAYR] = LAYOUT_65_ansi_blocker(
        KC_GRV, KC_F1, KC_F2,  KC_F3,  KC_F4,  KC_F5,  KC_F6,   KC_F7,  KC_F8,  KC_F9,  KC_F10,  KC_F11, KC_F12,    _______,    F_ZOOMR,
        MO(TMUX_LAYR),SECRET3,SECRET2,SECRET1,SECRET8,SECRET9,_______,_______,_______,_______,_______,DM_REC1,DM_REC2, _______,  KC_INS,
        _______,SECRET4,SECRET5,SECRET6,SECRET7,_______,_______,_______,_______,    QK_LEAD,  KC_SCRL, KC_PSCR,     _______,    KC_HOME,
        MO(SFT_LAYR), _______,SECRET10,SECRET11,_______,_______,_______,_______,DM_PLY1,DM_PLY2, KC_PAUS, MO(SFT_LAYR), _______, KC_END,
        _______, WM_SYM, MO(KCTL_LAYR),                    _______,                  _______,  MO(KCTL_LAYR), _______, _______, _______
    ),
//  [SFT_LAYR]
//  ____________________________________________________________________________________________________________________________________
// :   _______________________________________________________________________________________________________________________ .----.   :
// :  |  ~   ||MyComp||      || Calc || Menu ||      ||      || MPrv || MPly || MNxt ||      ||Arrow || Wave ||              |:Scroll:  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________|'.____.'  :
// :  |          ||      ||      ||      ||      ||      ||      ||  P7  ||  P8  ||  P9  || +  - ||      ||      ||          ||NumLck|  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||      ||      ||      ||      ||      ||      ||  P4  ||  P5  ||  P6  || *  / ||      ||               ||MSHold|  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |                 ||MSAcl2||      ||      ||      ||      ||      ||  P1  ||  P2  ||  P3  ||      ||           || MSUp || RClk |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |  LCtl   ||        || MSAcl0  ||                     P0                       ||   P.    ||  LClk   |  |MSLft || MSDn ||MSRgt |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [SFT_LAYR] = LAYOUT_65_ansi_blocker(
        KC_TILD, KC_MYCM, _______, KC_CALC, KC_APP,_______,_______,KC_MPRV, KC_MPLY, KC_MNXT,_______, ARROW, WAVE, _______, ENC_APPHIDE,
        _______, _______,_______,_______, _______, _______, _______, KC_P7, KC_P8, KC_P9, DUAL_PLUSMIN,_______,_______, _______, KC_NUM,
        _______,    _______,_______,_______,_______,_______, _______, KC_P4, KC_P5, KC_P6, DUAL_MULTDIV, _______,   _______,    MK_HOLD,
        _______,   MK_ACCEL2,_______,_______,_______,_______,_______,  KC_P1, KC_P2, KC_P3,  _______,   _______,   KC_MS_UP, KC_MS_BTN2,
        _______,  _______, MK_ACCEL0,                  KC_P0,                  KC_PDOT, KC_MS_BTN1, KC_MS_LEFT, KC_MS_DOWN, KC_MS_RIGHT
    ),
//  [KCTL_LAYR]
//  ____________________________________________________________________________________________________________________________________
// :   _______________________________________________________________________________________________________________________ .----.   :
// :  |      ||RGBMod||RGRMod||      ||RGHueI||RGHueD||RGSatI||RGSatD||      ||      ||      ||Ctest ||Debug ||              |: RGB  :  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________|'.____.'  :
// :  |          ||      ||      ||      ||Reboot||      ||      ||      ||      ||      ||      ||      ||      ||          ||RGBTog|  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||      ||      ||      ||Flash ||      ||      ||      ||      ||      ||KTrack||FJLite||  HRowLight    ||      |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |                 ||      ||      || EClr ||      ||BootLd||      ||      ||      ||      ||      ||           ||RBri+ ||      |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |         ||        ||         ||                                              ||         ||         |  |RSpd- ||RBri- ||RSpd+ |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [KCTL_LAYR] = LAYOUT_65_ansi_blocker(
        _______,RGB_MOD,RGB_RMOD,_______,_______,RGB_HUI,RGB_HUD,RGB_SAI,RGB_SAD,_______,_______,COLORTEST,DB_TOGG,_______, ENC_RGBPUSH,
        _______,_______,_______,_______, QK_RBT, _______,_______,_______,_______,_______,_______,_______, _______,  _______,    RGB_TOG,
        _______, _______,_______,_______, FLASH_KB, _______,_______,_______,_______,_______, KTRACK, FJLIGHT,    HROWLIGHT,     _______,
        _______,       _______,_______, EE_CLR, _______,  BOOTLDR, _______,_______,_______,_______,_______,   _______, RGB_VAI, _______,
        _______, _______, _______,                       _______,                      _______, _______,      RGB_SPD, RGB_VAD, RGB_SPI
    ),
//  [TMUX_LAYR]
//  ____________________________________________________________________________________________________________________________________
// :   _______________________________________________________________________________________________________________________ .----.   :
// :  |      ||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||              |:Resize:  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________|'.____.'  :
// :  |          ||LTRANS||LTRANS||      ||      ||LTRANS||      ||      ||      ||LTRANS||LTRANS||LTRANS||LTRANS||          ||      |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||      ||LTRANS||LTRANS||      ||      ||      ||      ||      ||LTRANS||LTRANS||LTRANS||               ||LTRANS|  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |                 ||LTRANS||LTRANS||LTRANS||      ||      ||LTRANS||      ||LTRANS||LTRANS||LTRANS||           ||LTRANS||      |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  | Ctrl    ||        ||  LAlt   ||                    LTRANS                    ||         ||  Ctrl   |  |LTRANS||LTRANS||LTRANS|  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [TMUX_LAYR] = LAYOUT_65_ansi_blocker(
        _______, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,  LTRANS,     _______, ENC_TMON,
        _______, LTRANS, LTRANS,_______,_______,  LTRANS,_______,_______,_______, LTRANS, LTRANS, LTRANS,  LTRANS,  _______,    _______,
        _______, _______, LTRANS, LTRANS,_______,_______,_______,_______,_______, LTRANS, LTRANS, LTRANS,           _______,     LTRANS,
        _______,        LTRANS, LTRANS, LTRANS, _______,  _______,  LTRANS,_______, LTRANS, LTRANS, LTRANS,   _______,  LTRANS, _______,
        KC_LCTL, _______, KC_LALT,                        LTRANS,                      _______, KC_RCTL,       LTRANS,  LTRANS,  LTRANS
    ),
//  [WSYM_LAYR]
//  ____________________________________________________________________________________________________________________________________
// :   _______________________________________________________________________________________________________________________ .----.   :
// :  |TD(G) ||TD(1) ||OPT2  ||OPT3  ||OPT4  ||OPT5  ||OPT6  ||OPT7  ||OPT8  ||OPT9  ||OPT0  ||OPTMIN||OPTEQ ||              |: Vol  :  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________|'.____.'  :
// :  |          ||OPTQ  ||OPTW  ||TD(E) ||OPTR  ||OPTT  ||OPTY  ||TD(U) ||TD(I) ||OPTO  ||OPTP  ||OPTLBR||OPTRBR||OPTBSL    ||      |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||OPTA  ||OPTS  ||OPTD  ||OPTF  ||OPTG  ||OPTH  ||OPTJ  ||OPTK  ||OPTL  ||OPTSEM||OPTAPO||               ||      |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |                 ||OPTZ  ||OPTX  ||OPTC  ||OPTV  ||OPTB  ||TD(N) ||OPTM  ||OPTCOM||OPTDOT||OPTSLS||           ||      ||      |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |         ||        ||         ||                                              ||         ||         |  |      ||      ||      |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [WSYM_LAYR] = LAYOUT_65_ansi_blocker(
        TD(ACT_GRV), TD(ACT_1), OPT2, OPT3, OPT4, OPT5,  OPT6,   OPT7,  OPT8,   OPT9,  OPT0,   OPTMIN,  OPTEQ,     _______, ENC_UNIMENU,
        _______,    OPTQ,  OPTW, TD(ACT_E), OPTR,  OPTT,   OPTY, TD(ACT_U), TD(ACT_I), OPTO, OPTP,  OPTLBR,  OPTRBR, OPTBSL,    _______,
        _______,        OPTA,  OPTS,  OPTD,  OPTF,   OPTG,     OPTH,   OPTJ,   OPTK,   OPTL,   OPTSEM, OPTAPO,      _______,    _______,
        _______,           OPTZ,  OPTX,  OPTC,   OPTV,   OPTB, TD(ACT_N),  OPTM,  OPTCOM,  OPTDOT, OPTSLS,   _______,  _______, _______,
        _______,    _______,  _______,                    _______,                      _______, _______,     _______, _______, _______
    ),
//  [MSYM_LAYR]
//  ____________________________________________________________________________________________________________________________________
// :   _______________________________________________________________________________________________________________________ .----.   :
// :  |LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||              |: Vol  :  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________|'.____.'  :
// :  |          ||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS    ||      |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||               ||      |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |    LShift       ||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||  RShift   ||      ||      |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |         ||        ||         ||                                              ||         ||         |  |      ||      ||      |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [MSYM_LAYR] = LAYOUT_65_ansi_blocker(
        MSYMGRV, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,   _______, ENC_UNIMENU,
        _______,  LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,    LTRANS,    _______,
        _______,    LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,         _______,    _______,
        KC_LSFT,      LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,        KC_RSFT,  _______, _______,
        _______,    _______,  _______,                    _______,                      _______, _______,     _______, _______, _______
    ),
//  [WIDE_LAYR]
//  ____________________________________________________________________________________________________________________________________
// :   _______________________________________________________________________________________________________________________ .----.   :
// :  |      ||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||              |: Vol  :  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________|'.____.'  :
// :  |          ||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS    ||BarTxt|  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||               ||SThru |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |                 ||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||LTRANS||           ||      ||UnderL|  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |         ||        ||         ||                    LTRANS                    ||         ||         |  |      ||      ||      |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [WIDE_LAYR] = LAYOUT_65_ansi_blocker(
        _______, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,  LTRANS,    _______,   BBRTEXT,
        _______,   LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,  LTRANS,  LTRANS,    BARTEXT,
        _______,     LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,        _______,      STHRU,
        _______,          LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS, LTRANS,    _______,  _______, UNDERLN,
        _______,  _______,  _______,                        LTRANS,                      _______,  _______,   _______, _______, _______
    ),
//  [CIRC_LAYR]
//  ____________________________________________________________________________________________________________________________________
// :   _______________________________________________________________________________________________________________________ .----.   :
// :  |      ||CIRCL1||CIRCL2||CIRCL3||CIRCL4||CIRCL5||CIRCL6||CIRCL7||CIRCL8||CIRCL9||CIRCL0||      ||      ||              |: Vol  :  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________|'.____.'  :
// :  |          ||CIRCLQ||CIRCLW||CIRCLE||CIRCLR||CIRCLT||CIRCLY||CIRCLU||CIRCLI||CIRCLO||CIRCLP||      ||      ||          ||      |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||CIRCLA||CIRCLS||CIRCLD||CIRCLF||CIRCLG||CIRCLH||CIRCLJ||CIRCLK||CIRCLL||      ||      ||               ||      |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |                 ||CIRCLZ||CIRCLX||CIRCLC||CIRCLV||CIRCLB||CIRCLN||CIRCLM||      ||      ||      ||           ||      ||      |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |         ||        ||         ||                                              ||         ||         |  |      ||      ||      |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [CIRC_LAYR] = LAYOUT_65_ansi_blocker(
        _______, CIRCL1, CIRCL2, CIRCL3, CIRCL4, CIRCL5, CIRCL6, CIRCL7, CIRCL8, CIRCL9, CIRCL0, _______, _______,   _______,   KC_MUTE,
        _______,   CIRCLQ, CIRCLW, CIRCLE, CIRCLR, CIRCLT, CIRCLY, CIRCLU, CIRCLI, CIRCLO, CIRCLP, _______, _______,  _______,  _______,
        _______,     CIRCLA, CIRCLS, CIRCLD, CIRCLF, CIRCLG, CIRCLH, CIRCLJ, CIRCLK, CIRCLL, _______, _______,      _______,    _______,
        _______,          CIRCLZ, CIRCLX, CIRCLC, CIRCLV, CIRCLB, CIRCLN, CIRCLM, _______, _______, _______,  _______, _______, _______,
        _______,  _______,  _______,                       _______,                      _______,  _______,   _______, _______, _______
    ),
//  [EMO_LAYR]
//  ____________________________________________________________________________________________________________________________________
// :   _______________________________________________________________________________________________________________________ .----.   :
// :  |      ||  E1  ||  E2  ||  E3  ||  E4  ||  E5  ||  E6  ||  E7  ||  E8  ||  E9  ||  E0  ||  E-  ||  E+  ||              |: Uni  :  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________|'.____.'  :
// :  |          ||ESnail|| Car  || Bus  ||Train || Taxi ||EPack ||  US  ||  EI  || EOK  ||  PI  ||EHand ||EStop ||ECheckMark|| EDel |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |             ||Aster ||Sungls||Pizza ||Burger||Globe || Hash ||Chick || Keyb ||EBulb ||Taco  ||ESShot||               ||EMark |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |                 ||EShh  ||ESmile||ESmirk||EAston||Bottle||Ninja || EMic || ESad || Grim || Div  ||           || EUp  ||QMark |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |         ||        ||         ||                                              ||         ||         |  |ELeft ||EDown ||ERght |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [EMO_LAYR] = LAYOUT_65_ansi_blocker(
        _______,E_K1,   E_K2,   E_K3,   E_K4,   E_K5,   E_K6,   E_K7,   E_K8,   E_K9,   E_K0,  E_MINS, E_PLUS,     _______, ENC_UNIMENU,
        _______,E_SNAIL, E_CAR, E_BUS, E_TRAIN, E_TAXI, E_PACKAGE, E_FLAGUS, E_I, E_OK, E_FLAGPI, E_HAND,  E_STOP,  E_CMARK,    E_TRASH,
        _______, E_STAR, E_SGLASS, E_PIZZA, E_BURGER, E_GLOBE, E_HASH, E_CHICKEN, E_KB, E_BULB, E_TACO, E_SSHOT,    _______,    E_EMARK,
        _______,       E_SHH, E_SMILE, E_SMIRK, E_ASTON, E_BOTTLE, E_NINJA, E_MIC, E_SAD, E_GRIM, E_DIV,    _______, E_POINTU,  E_QMARK,
        _______, _______, _______,                       _______,                      _______, _______,   E_POINTL, E_POINTD, E_POINTR
    ),
//  [LOCK_LAYR]
//  ____________________________________________________________________________________________________________________________________
// :   _______________________________________________________________________________________________________________________ .----.   :
// :  |  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  || No   ||  No  ||  No  ||  No  ||  No  ||     No       |: Unlk :  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________|'.____.'  :
// :  |   No     ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||   No     ||  No  |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |     No      ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||      No       ||  No  |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |       No        ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||  No  ||    No     ||  No  ||  No  |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |   No    ||   No   ||   No    ||                     No                       ||   No    ||   No    |  |  No  ||  No  ||  No  |  :
// :  |_________||________||_________||______________________________________________||_________||_________|  |______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`
    [LOCK_LAYR] = LAYOUT_65_ansi_blocker(
        NOKEY,  NOKEY,  NOKEY,  NOKEY,  NOKEY,  NOKEY,  NOKEY,  NOKEY,   NOKEY,  NOKEY,  NOKEY,  NOKEY, NOKEY,  NOKEY,    TD(KB_UNLOCK),
        NOKEY,     NOKEY,  NOKEY,  NOKEY,  NOKEY,  NOKEY,  NOKEY,  NOKEY,   NOKEY,   NOKEY, NOKEY,  NOKEY,  NOKEY,       NOKEY,   NOKEY,
        NOKEY,         NOKEY,  NOKEY,   NOKEY,  NOKEY,  NOKEY,  NOKEY,  NOKEY,  NOKEY,  NOKEY,  NOKEY,  NOKEY,      NOKEY,        NOKEY,
        NOKEY,              NOKEY,  NOKEY,  NOKEY, NOKEY,  NOKEY,   NOKEY,  NOKEY,  NOKEY,  NOKEY,  NOKEY,    NOKEY,     NOKEY,   NOKEY,
        NOKEY,     NOKEY,     NOKEY,                       NOKEY,                        NOKEY,    NOKEY,        NOKEY,  NOKEY,   NOKEY
    )
};

#if defined(ENCODER_MAP_ENABLE)
const uint16_t PROGMEM encoder_map[][NUM_ENCODERS][NUM_DIRECTIONS] = {
    [WIN_BASE]  =  { ENCODER_CCW_CW(ENC_VOLD, ENC_VOLU) },
    [MAC_BASE]  =  { ENCODER_CCW_CW(ENC_VOLD, ENC_VOLU) },
    [FN_LAYR]   =  { ENCODER_CCW_CW(DUAL_ZOOMO, DUAL_ZOOMI) },
    [SFT_LAYR]  =  { ENCODER_CCW_CW(ENC_SCROLLAPPL, ENC_SCROLLAPPR) },
    [KCTL_LAYR] =  { ENCODER_CCW_CW(ENC_RGBL, ENC_RGBR) },
    [TMUX_LAYR] =  { ENCODER_CCW_CW(ENC_TSIZEL, ENC_TSIZER) },
    [WSYM_LAYR] =  { ENCODER_CCW_CW(ENC_MENUL, ENC_MENUR) },
    [MSYM_LAYR] =  { ENCODER_CCW_CW(ENC_MENUL, ENC_MENUR) },
    [WIDE_LAYR] =  { ENCODER_CCW_CW(ENC_VOLD, ENC_VOLU) },
    [CIRC_LAYR] =  { ENCODER_CCW_CW(ENC_VOLD, ENC_VOLU) },
    [EMO_LAYR]  =  { ENCODER_CCW_CW(ENC_MENUL, ENC_MENUR) },
    [LOCK_LAYR] =  { ENCODER_CCW_CW(NOKEY, NOKEY) }
};
#endif

//  <~>~<~>~<~>~<~>~<~>~<~>~<~>~<~>~<~>~<~>~<~>~<~>~<~>
//  ~=~=~=~=~=~=~=~=~=~LED Indexes~=~=~=~=~=~=~=~=~=~=~ 
//  ____________________________________________________________________________________________________________________________________
// :   _______________________________________________________________________________________________________________________ .----.   :
// :  |  54  ||  55  ||  56  ||  57  ||  58  ||  59  ||  60  ||  61  ||  62  ||  63  ||  64  ||  65  ||  66  ||     67       |:      :  :
// :  |______||______||______||______||______||______||______||______||______||______||______||______||______||______________|'.____.'  :
// :  |    53    ||  52  ||  51  ||  50  ||  49  ||  48  ||  47  ||  46  ||  45  ||  44  ||  43  ||  42  ||  41  ||   40     ||  39  |  :
// :  |__________||______||______||______||______||______||______||______||______||______||______||______||______||__________||______|  :
// :  |     25      ||  26  ||  27  ||  28  ||  29  ||  30  ||  31  ||  32  ||  33  ||  34  ||  35  ||  36  ||      37       ||  38  |  :
// :  |_____________||______||______||______||______||______||______||______||______||______||______||______||_______________||______|  :
// :  |       24        ||  20  ||  19  ||  18  ||  17  ||  16  ||  15  ||  14  ||  13  ||  12  ||  11  ||    10     ||  9   ||  8   |  :
// :  |_________________||______||______||______||______||______||______||______||______||______||______||___________||______||______|  :
// :  |   23    ||   22   ||   21    ||                      0                       ||    1    ||    2    |3 |  5   ||  6   ||  7   |  :
// :  |_________||________||_________||______________________________________________||_________||_________| 4|______||______||______|  :
// `------------------------------------------------------------------------------------------------------------------------------------`


bool process_record_user(uint16_t keycode, keyrecord_t *record) {
    // userspace
    if (!process_record_userspace(keycode,record)) {
        return false;
    }
    // secrets
    return process_record_secrets(keycode, record);
}

void leader_end_user(void) {
    // if either userspace or secrets return false, leader matching stops there
    if (process_leader_userspace() && process_leader_secrets()) {
        // leader sequence failed, so blink the rgb red a few times
        is_leader_error = true;
        leader_error_token = defer_exec(1500, leader_error_callback, NULL);  // schedule callback
    }

    is_in_leader_sequence = false;
}
